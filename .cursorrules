# Regras do Projeto MCP Server

## ğŸ¯ Objetivo do Projeto
Este Ã© um servidor MCP (Model Context Protocol) implementado com NestJS, TypeScript e arquitetura limpa seguindo os princÃ­pios SOLID.

## ğŸ—ï¸ Arquitetura e PadrÃµes

### Clean Architecture
- **Domain Layer**: Entidades, interfaces e regras de negÃ³cio
- **Application Layer**: Casos de uso e serviÃ§os de aplicaÃ§Ã£o  
- **Infrastructure Layer**: Controllers, repositÃ³rios e integraÃ§Ãµes externas
- **Shared Layer**: UtilitÃ¡rios e configuraÃ§Ãµes compartilhadas

### PrincÃ­pios SOLID
- **SRP**: Cada classe tem uma Ãºnica responsabilidade
- **OCP**: Aberto para extensÃ£o, fechado para modificaÃ§Ã£o
- **LSP**: SubstituiÃ§Ã£o de implementaÃ§Ãµes via interfaces
- **ISP**: Interfaces especÃ­ficas e coesas
- **DIP**: InversÃ£o de dependÃªncia via injeÃ§Ã£o

## ğŸ“ Estrutura de DiretÃ³rios

```
src/
â”œâ”€â”€ domain/           # Camada de domÃ­nio
â”‚   â”œâ”€â”€ entities/    # Entidades e tipos
â”‚   â””â”€â”€ interfaces/  # Contratos e interfaces
â”œâ”€â”€ application/      # Camada de aplicaÃ§Ã£o
â”‚   â””â”€â”€ use-cases/   # Casos de uso
â”œâ”€â”€ infrastructure/  # Camada de infraestrutura
â”‚   â”œâ”€â”€ controllers/ # Controllers REST
â”‚   â””â”€â”€ repositories/# ImplementaÃ§Ãµes de repositÃ³rios
â”œâ”€â”€ shared/          # UtilitÃ¡rios compartilhados
â””â”€â”€ mcp/            # MÃ³dulo principal
```

## ğŸ”§ ConfiguraÃ§Ãµes de Desenvolvimento

### Gerenciador de Pacotes
- Use **pnpm** como gerenciador de pacotes
- Comandos: `pnpm install`, `pnpm run start:dev`, etc.

### TypeScript
- ConfiguraÃ§Ã£o em `tsconfig.json`
- Paths aliases configurados: `@/*`, `@/domain/*`, etc.
- Strict mode habilitado para melhor qualidade de cÃ³digo

### Linting e FormataÃ§Ã£o
- ESLint configurado com regras TypeScript
- Prettier para formataÃ§Ã£o consistente
- Execute `pnpm run lint` e `pnpm run format` regularmente

## ğŸ“ ConvenÃ§Ãµes de CÃ³digo

### Nomenclatura
- **Classes**: PascalCase (`McpRequestEntity`)
- **Interfaces**: PascalCase com prefixo I (`IMcpRepository`)
- **MÃ©todos e propriedades**: camelCase (`processRequest`)
- **Constantes**: UPPER_SNAKE_CASE (`MCP_ERROR_CODE`)
- **Arquivos**: kebab-case (`mcp.use-case.ts`)

### Estrutura de Arquivos
- Um arquivo por classe/interface
- Agrupar por funcionalidade em diretÃ³rios
- Usar barrel exports (`index.ts`) quando apropriado

### Imports
- Use path aliases: `@/domain/entities/mcp.entity`
- Imports relativos apenas para arquivos prÃ³ximos
- Organize imports: externos primeiro, depois internos

## ğŸ§ª Testes

### Estrutura de Testes
- Testes unitÃ¡rios para cada camada
- Testes de integraÃ§Ã£o para fluxos completos
- Mocks para dependÃªncias externas
- Coverage mÃ­nimo de 80%

### ConvenÃ§Ãµes de Teste
- Arquivos de teste: `*.spec.ts`
- Descreva cenÃ¡rios claramente
- Use AAA pattern (Arrange, Act, Assert)
- Teste casos de sucesso e erro

## ğŸ“š DocumentaÃ§Ã£o

### CÃ³digo
- Documente interfaces pÃºblicas com JSDoc
- Explique lÃ³gica complexa com comentÃ¡rios
- Mantenha README.md atualizado
- Use Swagger para documentaÃ§Ã£o da API

### Commits
- Use conventional commits: `feat:`, `fix:`, `docs:`, etc.
- Mensagens claras e descritivas
- Referencie issues quando apropriado

## ğŸš€ Deploy e Ambiente

### VariÃ¡veis de Ambiente
- Use `.env` para configuraÃ§Ãµes locais
- Documente todas as variÃ¡veis necessÃ¡rias
- Nunca commite arquivos `.env`

### Scripts DisponÃ­veis
- `pnpm run start:dev` - Desenvolvimento
- `pnpm run build` - Build de produÃ§Ã£o
- `pnpm run test` - Executar testes
- `pnpm run lint` - Verificar cÃ³digo

## ğŸ”’ SeguranÃ§a

### Boas PrÃ¡ticas
- Valide todas as entradas
- Use DTOs para transferÃªncia de dados
- Implemente rate limiting
- Configure CORS adequadamente
- Nunca logue informaÃ§Ãµes sensÃ­veis

## ğŸ“Š Monitoramento

### Logs
- Use structured logging
- Inclua contexto relevante
- Diferentes nÃ­veis: debug, info, warn, error
- NÃ£o logue dados sensÃ­veis

### MÃ©tricas
- Monitore performance de endpoints
- Acompanhe uso de recursos
- Configure alertas para problemas crÃ­ticos

## ğŸ¤ ContribuiÃ§Ã£o

### Processo
1. Crie uma branch para sua feature
2. Implemente seguindo as convenÃ§Ãµes
3. Adicione testes adequados
4. Execute linting e testes
5. Abra Pull Request com descriÃ§Ã£o clara

### Code Review
- Revise arquitetura e padrÃµes
- Verifique cobertura de testes
- Confirme documentaÃ§Ã£o atualizada
- Valide performance quando relevante

## ğŸ¯ Objetivos de Qualidade

- **Manutenibilidade**: CÃ³digo limpo e bem estruturado
- **Testabilidade**: FÃ¡cil de testar e mockar
- **Escalabilidade**: Preparado para crescimento
- **Performance**: Otimizado para produÃ§Ã£o
- **SeguranÃ§a**: Seguro por padrÃ£o

## ğŸ“ Suporte

Para dÃºvidas sobre arquitetura ou padrÃµes:
- Consulte a documentaÃ§Ã£o do NestJS
- Revise os princÃ­pios SOLID
- Analise exemplos no cÃ³digo existente
- Abra issue para discussÃµes tÃ©cnicas
